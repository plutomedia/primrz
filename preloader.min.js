(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define(b):a.Preloader=b()})(this,function(){'use strict';function a(a,b){var d=new XMLHttpRequest;d.onload=b&&function(){b(d.response)},d.onprogress=c&&c.thunk,d.open('GET',a),d.send()}function b(){if(!document.body)setTimeout(b,0);else if(!window.DEBUG){var a=document.createElement('script');a.innerHTML=f.join('\n'),document.body.appendChild(a)}else if(0<f.length){var c=f.shift(),d=document.createElement('script');d.src=c,d.onload=b,document.body.appendChild(d)}}var c={bar:null,files:{},loaded:0,total:0,findProgressBar:function(){this.bar||(this.bar=document.querySelector('progress'))},shrink:function(a){this.findProgressBar(),this.bar&&(this.bar.style.height=a)},hide:function(){this.findProgressBar(),this.bar&&(this.bar.style.display='none')},thunk:function(a){var b=a.target.responseURL||a.target.currentSrc;if(b){this.files[b]||(this.files[b]={});var c=this.files[b];if('number'==typeof a.loaded)c.loaded=a.loaded,c.total=a.total;else if(a.srcElement){for(var d=a.srcElement.buffered,e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=0;g<d.length;++g)e=Math.min(e,d.start(g)),f=Math.max(f,d.end(g));c.loaded=1e3*f,c.total=1e3*a.srcElement.duration}}var h=0,i=0;for(var j in this.files){var k=this.files[j];i+=k.loaded,h+=k.total}this.loaded=i,this.total=h,this.findProgressBar(),this.bar&&h&&(this.bar.max=h,this.bar.value=i)}},d=document.querySelectorAll('script'),e=d[d.length-1],f=[];['findProgressBar','shrink','hide','thunk'].forEach(function(a){return c[a]=c[a].bind(c)});var g=0;return window.PRIMROSE_TELEMETRY_OPT_OUT||a('https://www.primrosevr.com/telemetry'),e&&e.dataset.files&&e.dataset.files.split(',').forEach(function(c,d,e){a(c,function(a){f[d]=window.DEBUG?c:a,++g,g===e.length&&b()})}),c});
//# sourceMappingURL=preloader.min.js.map
