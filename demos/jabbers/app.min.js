function eye(e,n){var o=sphere(.05,6,3).colored(16777215).addTo(n).at(.07*e,.05,.16);return sphere(.01,3,2).colored(0).addTo(o).at(0,0,.045),o}function Jabber(e,n,o){var a=R.item(Primrose.Constants.SKINS),t=hub().at(R.number(-e,e),0,R.number(-n,n)),r=sphere(.2,14,7).colored(a,{shadow:!0}).addTo(t).at(0,.125,0),i=v3(R.number(-o,o),0,R.number(-o,o)),s=v3(0,0,0);return eye(-1,r),eye(1,r),t.rotation.y=Math.PI,t.update=function(o){i.y-=env.options.gravity*o,t.position.add(s.copy(i).multiplyScalar(o)),(i.x>0&&t.position.x>=e||i.x<0&&t.position.x<=-e)&&(i.x*=-1),(i.z>0&&t.position.z>=n||i.z<0&&t.position.z<=-n)&&(i.z*=-1),i.y<0&&t.position.y<0&&(i.y=0,t.position.y=0),s.copy(t.position).sub(env.head.position);var a=s.length();a<3?(s.divideScalar(a),s.y=0,i.add(s.multiplyScalar((3-a)/100)),s.set(R.number(-.01,.01),R.number(-.01,.01),R.number(-.01,.01)),t.position.add(s),t.lookAt(env.head.position)):t.lookAt(s.copy(i).add(t.position))},r.addEventListener("select",function(e){s.copy(e.hit.face.normal),s.y=env.options.gravity/2,i.add(s)}),t}var WIDTH=100,HEIGHT=6,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,t=0,jabs={},R=Primrose.Random,env=new Primrose.BrowserEnvironment({backgroundColor:13231854,skyTexture:"../shared_assets/images/bg.jpg",groundTexture:"../shared_assets/images/grass.png",font:"../shared_assets/fonts/helvetiker_regular.typeface.json",useFog:!0,drawDistance:100,enableShadows:!0,fullScreenButtonContainer:"#fullScreenButtonContainer"});env.addEventListener("ready",function(){for(var e=0;e<10;++e){var n=Jabber(MIDX/5,MIDZ/5,1);jabs[n.uuid]=n,env.scene.add(n)}Preloader.hide()}),env.addEventListener("update",function(){for(var e in jabs)jabs[e].update(env.deltaTime)});