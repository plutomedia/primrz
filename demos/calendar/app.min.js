function deg2rad(e){return Math.PI*e/180}function rad2deg(e){return 180*e/Math.PI}function rand(){Primrose.Random.number(0,dim)}function randDegree(){Primrose.Random.number(-Math.PI,Math.PI)}function setColor(e){var t=new Date;t.getMonth(),t.getDate();e?(this.box.material=primaryMaterial,this.lbl.material=secondaryMaterial,this.bev.material=secondaryMaterial):(this.box.material=secondaryMaterial,this.lbl.material=primaryMaterial,this.bev.material=primaryMaterial)}function text(e,t){return t=t||1,text3D(t*textSize,e).center()}function hitDate(e,t){var r=new Date;r.setMonth(e),r.setDate(t);var a=dayNames[r.getDay()]+", "+monthNames[e]+" "+t+", "+r.getFullYear();env.speech.speak(a)}function showMonth(e){env.ui.children.splice(0);var t=new Date,r=null;e==t.getMonth()?r=t.getDate():t.setMonth(e),t.setDate(1);var a=0,o=0,n=0;for(env.ui.add(months[e].latLng(-72,0));t.getMonth()===e;){(a=t.getDay())<n&&++o;var i=t.getDate(),d=objs[i-1];d.box.material=r==i?todayMaterial:secondaryMaterial,d.box.addEventListener("enter",setColor.bind(d,!0)),d.box.addEventListener("exit",setColor.bind(d,!1)),d.box.addEventListener("select",hitDate.bind(null,e,i)),env.ui.add(d.hub.latLng(boxSpacing*(o-2)-45,boxSpacing*(3-a))),t.setDate(t.getDate()+1),n=a}}var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months=null,currentMonth=(new Date).getMonth(),primaryColor=15475825,secondaryColor=14737632,todayColor=3170432,angleThreshold=15,primaryMaterial=material({color:primaryColor}),secondaryMaterial=material({color:secondaryColor}),todayMaterial=material({color:todayColor}),objs=[],dim=50,boxSize=dim/300,boxSpacing=50*boxSize,textSize=.333*boxSize,hDim=dim/2,env=new Primrose.BrowserEnvironment({groundTexture:"../shared_assets/images/ideck.png",font:"../shared_assets/fonts/helvetiker_regular.typeface.json",backgroundColor:secondaryColor,useFog:!0,drawDistance:hDim,enableShadows:!0,fullScreenButtonContainer:"#fullScreenButtonContainer"});env.addEventListener("ready",function(){env.insertFullScreenButtons("body"),months=monthNames.map(function(e){return text(e,3.5).colored(primaryColor,{shadow:!0}).named(e)});for(var e=0;e<31;++e){var t=hub(),r=box(boxSize).colored(secondaryColor).named("box"+(e+1)).addTo(t),a=box(1.1*boxSize,1.1*boxSize,.9*boxSize).colored(primaryColor,{shadow:!0}).named("bev"+(e+1)).addTo(r),o=text((e+1).toString()).colored(primaryColor).named("txt"+(e+1)).addTo(r).at(0,0,.08);objs.push({hub:t,box:r,lbl:o,bev:a})}showMonth(currentMonth),env.ui.add(text("Turn left or right to change month",.5).colored(primaryColor).named("inst1").latLng(-20,0,1)),env.ui.add(text("Click on dates.",.5).colored(primaryColor).named("inst2").latLng(-17,0,1)),Preloader.hide()});var lt=0;env.addEventListener("update",function(){var e=env.turns.degrees-lt;Math.abs(e)>angleThreshold&&((currentMonth+=e<0?1:-1)<0?currentMonth+=12:currentMonth>=12&&(currentMonth-=12),showMonth(currentMonth),lt=env.turns.degrees)});